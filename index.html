<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8"/>
	<title>Timeline</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<link rel="apple-touch-icon-precomposed" href="appletouchicon.png"/>

	<style media="screen">
		body {
			padding: 5%;
			font-family: sans-serif;
			text-align: center;
			color: #565a5c;
			line-height: 1.2;
		}
		ul {
			list-style: none;
			padding-left: 0;
		}
		li {
			margin-bottom: 25px;
			padding: 2px 0 5px 0;
			background: #fff;
		}
		li:before {
			content: "";
			width: 1px;
			height: 120px;
			z-index: -1;
			position: absolute;
			display: block;
			background: #dadada;
			left: 0; right: 0;
			margin: auto;
		}
		li:last-of-type:before {
			background: blue;
			display: none;
		}
		p {
			margin: 0.5em;
			margin-bottom: 3px;
		}
		.emoji {
			/*position: relative;
			left: 1px;*/
		}
		.small {
			font-size: 0.8em;
			color: #abadae;
			margin-top: 0;
		}
	</style>

	<script charset="utf-8">
		function timeSince(date) {

			if (new Date() - date < 0) {
				var seconds = (date - new Date()) / 1000;
			} else {
				var seconds = (new Date() - date) / 1000;
			}

	    var interval = Math.round( (seconds / 31536000) * 10 ) / 10;

	    if (interval > 1) {
	        return interval + " years";
	    }
	    interval = Math.round( (seconds / 2592000) * 10 ) / 10;
	    if (interval > 1) {
	        return interval + " months";
	    }
			interval = Math.round( (seconds / 86400) * 10 ) / 10;
	    if (interval > 1) {
	        return interval + " days";
	    }
			interval = Math.round( (seconds / 3600) * 10 ) / 10;
	    if (interval > 1) {
	        return interval + " hours";
	    }
			interval = Math.round( (seconds / 60) * 10 ) / 10;
	    if (interval > 1) {
	        return interval + " minutes";
	    }
	    return Math.floor(seconds) + " seconds";
		}

		function formatDate(date) {
			var day = date.getDate();
	    var month = date.getMonth() + 1; // Months are zero based

			if (month == 1) {
				var month = "January"
			}

			if (month == 2) {
				var month = "February"
			}

			if (month == 3) {
				var month = "March"
			}

			if (month == 4) {
				var month = "April"
			}

			if (month == 5) {
				var month = "May"
			}

			if (month == 6) {
				var month = "June"
			}

			if (month == 7) {
				var month = "July"
			}

			if (month == 8) {
				var month = "August"
			}

			if (month == 9) {
				var month = "September"
			}

			if (month == 10) {
				var month = "October"
			}

			if (month == 11) {
				var month = "November"
			}

			if (month == 12) {
				var month = "December"
			}

	    var year = date.getFullYear();
			var currentYear = new Date().getFullYear();
			var today = new Date();

			// If it's today, return special formatting.
			// Today is the 7th of September
			if (date.getFullYear() == today.getFullYear() && date.getMonth() == today.getMonth() && date.getDate() == today.getDate()) {
				if (day == 1 || day == 21 ||  day == 31) {
					return "Today is the " + day + "st of " + month;
				}
				if (day == 2 || day == 22) {
					return "Today is the " + day + "nd of " + month;
				}
				if (day == 3 || day == 23) {
					return "Today is the " + day + "rd of " + month;
				}
				if (day == 4 || day == 5 || day == 6 || day == 7 || day == 8 || day == 9 || day == 10 || day == 11 || day == 12 || day == 13 || day == 14 || day == 15 || day == 16 || day == 17 || day == 18 || day == 19 || day == 20 || day == 24 || day == 25 || day == 26 || day == 27 || day == 28 || day == 29 || day == 30) {
					return "Today is the " + day + "th of " + month;
				}
			}

			// If it's the current year, drop the year.
			// 7 September
			if (year == currentYear) {
				return day + " " + month;
			}

			// Otherwise return the full date
			// 7 September 2013
			return day + " " + month + " " + year;
		}

		function formatTime(date) {
			var hours = date.getHours();
			var minutes = date.getMinutes();
			var seconds = date.getSeconds();
			var ampm = " AM";

			if (hours > 12) {
				var hours = hours - 12;
				var ampm = " PM";
			}

			if (minutes < 10) {
				var minutes = "0" + minutes
			}

			if (seconds < 10) {
				var seconds = "0" + seconds
			}

			return hours + ":" + minutes + ampm;
		}

		function emojiClock() {
			hours = new Date().getHours()
			if (hours == 1 || hours == 13) {
				return "üïê";
			}
			if (hours == 2 || hours == 14) {
				return "üïë";
			}
			if (hours == 3 || hours == 15) {
				return "üïí";
			}
			if (hours == 4 || hours == 16) {
				return "üïì";
			}
			if (hours == 5 || hours == 17) {
				return "üïî";
			}
			if (hours == 6 || hours == 18) {
				return "üïï";
			}
			if (hours == 7 || hours == 19) {
				return "üïñ";
			}
			if (hours == 8 || hours == 20) {
				return "üïó";
			}
			if (hours == 9 || hours == 21) {
				return "üïò";
			}
			if (hours == 10 || hours == 22) {
				return "üïô";
			}
			if (hours == 11 || hours == 23) {
				return "üïö";
			}
			if (hours == 12 || hours == 24) {
				return "üïõ";
			}
			return "üìÖ"; // If it doesn't work show calendar.
		}

	</script>
</head>
<body>

  <ul>
		<li>
			<p class="emoji">üçè</p>
			<p id="applewatchTimeAgo"></p>
			<p id="applewatchDate" class="small"></p>
		</li>

    <li>
			<p id="emojiClock" class="emoji"></p>
			<p id="today"></p>
			<p id="time" class="small"></p>
		</li>

    <li>
			<p class="emoji">üì∑</p>
			<p id="instagramTimeAgo"></p>
			<p id="instagramDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üçü</p>
			<p id="muricaTimeAgo"></p>
			<p id="muricaDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üö¨</p>
			<p id="smokingTimeAgo"></p>
			<p id="smokingDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üè°</p>
			<p id="houseTimeAgo"></p>
			<p id="houseDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üö¥</p>
			<p id="ridingTimeAgo"></p>
			<p id="ridingDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üë∂</p>
			<p id="ollieTimeAgo"></p>
			<p id="ollieDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üíí</p>
			<p id="weddingTimeAgo"></p>
			<p id="weddingDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üê©</p>
			<p id="lilyTimeAgo"></p>
			<p id="lilyDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üíë</p>
			<p id="jandyTimeAgo"></p>
			<p id="jandyDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üíº</p>
			<p id="smartTimeAgo"></p>
			<p id="smartDate" class="small"></p>
		</li>

    <li>
			<p class="emoji">üë®</p>
			<p id="andyTimeAgo"></p>
			<p id="andyDate" class="small"></p>
		</li>
  </ul>

	<script charset="utf-8">
		function setAndUpdateContent() {
			var applewatch = new Date('2015/03/09 10:00')
			document.getElementById("applewatchTimeAgo").innerHTML = "The Apple Watch event is in " + timeSince(applewatch);
			document.getElementById("applewatchDate").innerHTML = formatDate(applewatch);

			var today = new Date();
			document.getElementById("emojiClock").innerHTML = emojiClock();
			document.getElementById("today").innerHTML = formatDate(today);
			document.getElementById("time").innerHTML = formatTime(today);

			var instagram = new Date('2014/10/06') // This is FB start date
			document.getElementById("instagramTimeAgo").innerHTML = "I started at Instagram " + timeSince(instagram) + " ago";
			document.getElementById("instagramDate").innerHTML = formatDate(instagram);

			var murica = new Date('2014/09/26')
			document.getElementById("muricaTimeAgo").innerHTML = "We moved to the U.S. " + timeSince(murica) + " ago";
			document.getElementById("muricaDate").innerHTML = formatDate(murica);

			var smoking = new Date('2013/11/01')
			document.getElementById("smokingTimeAgo").innerHTML = "I quit smoking " + timeSince(smoking) + " ago";
			document.getElementById("smokingDate").innerHTML = formatDate(smoking);

			var house = new Date('2013/09/23')
			document.getElementById("houseTimeAgo").innerHTML = "We got our house " + timeSince(house) + " ago";
			document.getElementById("houseDate").innerHTML = formatDate(house);

			var riding = new Date('2013/04/30')
			document.getElementById("ridingTimeAgo").innerHTML = "I started riding " + timeSince(riding) + " ago";
			document.getElementById("ridingDate").innerHTML = formatDate(riding);

			var ollie = new Date('2012/09/10')
			document.getElementById("ollieTimeAgo").innerHTML = "Ollie was born " + timeSince(ollie) + " ago";
			document.getElementById("ollieDate").innerHTML = formatDate(ollie);

			var wedding = new Date('2010/06/26')
			document.getElementById("weddingTimeAgo").innerHTML = "Jane and I got married " + timeSince(wedding) + " ago";
			document.getElementById("weddingDate").innerHTML = formatDate(wedding);

			var lily = new Date('2006/12/05') // Based on Metadata from photos.
			document.getElementById("lilyTimeAgo").innerHTML = "We got Lily " + timeSince(lily) + " ago";
			document.getElementById("lilyDate").innerHTML = formatDate(lily);

			var jandy = new Date('2006/08/19')
			document.getElementById("jandyTimeAgo").innerHTML = "Jane and I got together " + timeSince(jandy) + " ago";
			document.getElementById("jandyDate").innerHTML = formatDate(jandy);

			var smart = new Date('2004/03/31') // Can't remember day.
			document.getElementById("smartTimeAgo").innerHTML = "I got my first design job " + timeSince(smart) + " ago";
			document.getElementById("smartDate").innerHTML = formatDate(smart);

			var andy = new Date('1983/05/16')
			document.getElementById("andyTimeAgo").innerHTML = "Andy is " + timeSince(andy) + " old";
			document.getElementById("andyDate").innerHTML = "Born " + formatDate(andy);
		}

		setAndUpdateContent();
		setInterval(setAndUpdateContent, 1000);
	</script>

</body>
</html>
